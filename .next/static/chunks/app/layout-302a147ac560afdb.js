(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},8304:(e,s,r)=>{"use strict";r.d(s,{Ay:()=>i,im:()=>n});var l=r(1990);let n=(0,l.zD)("user/get",async e=>{let{email:s,token:r}=e,l=await fetch("http://gateway:8090/v1/users/".concat(s,"/").concat(r),{method:"GET",headers:{"Content-Type":"application/json"}}),n=await l.json();return console.log("Profile response",n),n}),i=(0,l.Z0)({name:"user",initialState:{data:{},status:"idle",error:null},reducers:{},extraReducers(e){e.addCase(n.pending,e=>{e.status="loading"}).addCase(n.fulfilled,(e,s)=>{e.status="succeeded",e.data=s.payload}).addCase(n.rejected,(e,s)=>{e.status="failed",e.error=s.error.message})}}).reducer},8728:(e,s,r)=>{Promise.resolve().then(r.bind(r,9592))},9592:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>A});var l=r(5155);r(347);var n=r(83),i=r(2115),o=r(8887),t=r(7287),d=r(1590),c=r(3751),a=r(112),u=r(4130),h=r(3608),x=r(2823),p=r(6707),g=r(9967),j=r(9697),m=r(1220),f=r(1858),k=r(6874),y=r.n(k),C=r(5695),w=r(4540),b=r(8304),v=r(9159);function E(){let e=(0,C.useRouter)(),[s,r]=(0,i.useState)(void 0),[n,k]=(0,i.useState)(!1),E=(0,w.wA)(),S=(0,w.d4)(e=>e.user.data);(0,i.useEffect)(()=>{let e=localStorage.getItem("token");if(r(e),e){let s=(0,v.s)(e).sub;E((0,b.im)({email:s,token:e}))}},[]);let _=()=>{localStorage.removeItem("token"),r(null),e.push("/signin")},A=(0,l.jsxs)(l.Fragment,{children:[(null==S?void 0:S.role)==="PATIENT"&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.E,{weight:500,style:{color:"#1f2937",cursor:"pointer"},onClick:()=>e.push("/doctors"),children:"Doctors"}),(0,l.jsx)(o.E,{weight:500,style:{color:"#1f2937",cursor:"pointer"},onClick:()=>e.push("/bookslot"),children:"Book"})]}),(0,l.jsx)(o.E,{weight:500,style:{color:"#1f2937",cursor:"pointer"},onClick:()=>e.push("/appointments/".concat(null==S?void 0:S.id)),children:"Appointments"})]});return(0,l.jsxs)("div",{style:{backgroundColor:"#f9fafb"},children:[(0,l.jsx)(t.t,{radius:0,py:16,withBorder:!0,style:{backgroundColor:"white",borderBottom:"1px solid #e5e7eb"},children:(0,l.jsxs)(d.m,{size:"lg",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsx)(y(),{href:"/",children:(0,l.jsx)(c.h,{order:3,style:{color:"#1e40af"},children:"MediBridge"})}),(0,l.jsxs)(a.Y,{spacing:"xl",visibleFrom:"sm",children:[s&&A,s?(0,l.jsxs)(u.W,{shadow:"xl",width:180,children:[(0,l.jsx)(u.W.Target,{children:(0,l.jsx)(h.N,{style:{padding:"6px 12px",borderRadius:"8px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center"},children:(0,l.jsxs)(a.Y,{spacing:"xs",children:[(0,l.jsx)(x.e,{name:null==S?void 0:S.fullname,color:"#1e40af",radius:"xl"}),(0,l.jsx)(o.E,{weight:500,children:null==S?void 0:S.email}),(0,l.jsx)(f.A,{size:16,stroke:1.5})]})})}),(0,l.jsx)(u.W.Dropdown,{children:(0,l.jsx)(u.W.Item,{color:"red",onClick:_,children:"Logout"})})]}):(0,l.jsx)(p.$,{size:"sm",color:"#1e40af",radius:"xl",onClick:()=>e.push("/signin"),children:"Signin"})]}),(0,l.jsx)(g.w,{opened:n,onClick:()=>k(e=>!e),hiddenFrom:"sm"})]})}),(0,l.jsx)(j._,{opened:n,onClose:()=>k(!1),padding:"md",size:"xs",hiddenFrom:"sm",children:(0,l.jsxs)(m.B,{spacing:"lg",children:[s&&A,s?(0,l.jsx)(p.$,{color:"red",radius:"md",onClick:_,children:"Logout"}):(0,l.jsx)(p.$,{color:"#1e40af",radius:"md",onClick:()=>e.push("/signin"),children:"Signin"})]})})]})}r(2500),r(2846);let S=(0,r(1990).U1)({reducer:{user:b.Ay}});function _(e){let{children:s}=e;return(0,l.jsx)(w.Kq,{store:S,children:s})}function A(e){let{children:s}=e;return(0,l.jsx)("html",{lang:"en",children:(0,l.jsx)("body",{children:(0,l.jsx)(_,{children:(0,l.jsxs)(n.y,{children:[(0,l.jsx)(E,{}),s]})})})})}}},e=>{e.O(0,[690,365,991,545,21,30,563,990,411,874,73,441,964,358],()=>e(e.s=8728)),_N_E=e.O()}]);